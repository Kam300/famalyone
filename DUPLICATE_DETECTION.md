# üîç –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ñ–æ—Ç–æ

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π.

## üéØ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. Perceptual Hash (pHash)
–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–ª–≥–æ—Ä–∏—Ç–º –ø–µ—Ä—Ü–µ–ø—Ç–∏–≤–Ω–æ–≥–æ —Ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è:
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–º–µ–Ω—å—à–∞–µ—Ç—Å—è –¥–æ 8x8 –ø–∏–∫—Å–µ–ª–µ–π
- –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Å—Ä–µ–¥–Ω—è—è —è—Ä–∫–æ—Å—Ç—å
- –ö–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —Å–æ —Å—Ä–µ–¥–Ω–µ–π —è—Ä–∫–æ—Å—Ç—å—é
- –°–æ–∑–¥–∞–µ—Ç—Å—è 64-–±–∏—Ç–Ω—ã–π —Ö–µ—à (–±–∏–Ω–∞—Ä–Ω–∞—è —Å—Ç—Ä–æ–∫–∞)
- –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ—Ç—Å—è –≤ hex –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ—Å—Ç–∏

### 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
–ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å —Ñ–æ—Ç–æ:
1. –í—ã—á–∏—Å–ª—è–µ—Ç—Å—è —Ö–µ—à –Ω–æ–≤–æ–≥–æ —Ñ–æ—Ç–æ
2. –ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–æ—Ç–æ —á–ª–µ–Ω–∞ —Å–µ–º—å–∏
3. –í—ã—á–∏—Å–ª—è—é—Ç—Å—è —Ö–µ—à–∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ñ–æ—Ç–æ
4. –°—Ä–∞–≤–Ω–∏–≤–∞—é—Ç—Å—è —Ö–µ—à–∏
5. –ï—Å–ª–∏ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ ‚Üí —Ñ–æ—Ç–æ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞

### –£—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∫ –∏–∑–º–µ–Ω–µ–Ω–∏—è–º
Perceptual hash –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã –¥–∞–∂–µ –µ—Å–ª–∏:
- –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–∂–∞—Ç–æ —Å –¥—Ä—É–≥–∏–º –∫–∞—á–µ—Å—Ç–≤–æ–º
- –ò–∑–º–µ–Ω–µ–Ω —Ä–∞–∑–º–µ—Ä –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- –ü—Ä–∏–º–µ–Ω–µ–Ω—ã –Ω–µ–±–æ–ª—å—à–∏–µ —Ü–≤–µ—Ç–æ–≤—ã–µ –∫–æ—Ä—Ä–µ–∫—Ü–∏–∏
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–µ–∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω—ã–µ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –ë—ã—Å—Ç—Ä–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ (8x8 = 64 –ø–∏–∫—Å–µ–ª—è)
- –ö–æ–º–ø–∞–∫—Ç–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ (16 hex —Å–∏–º–≤–æ–ª–æ–≤)
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ (—Å—Ç—Ä–æ–∫–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ)

## üé® UX/UI

### –û–¥–∏–Ω —á–µ–ª–æ–≤–µ–∫
```
–ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å –¥—É–±–ª–∏–∫–∞—Ç:
‚Üí "‚ÑπÔ∏è –≠—Ç–æ —Ñ–æ—Ç–æ —É–∂–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ –∫ –ò–º—è –§–∞–º–∏–ª–∏—è"
```

### –ù–µ—Å–∫–æ–ª—å–∫–æ –ª—é–¥–µ–π
```
–í—ã–±—Ä–∞–Ω–æ 3 —á–µ–ª–æ–≤–µ–∫–∞:
- 2 –Ω–æ–≤—ã—Ö —Ñ–æ—Ç–æ ‚Üí —Å–æ—Ö—Ä–∞–Ω–µ–Ω–æ
- 1 –¥—É–±–ª–∏–∫–∞—Ç ‚Üí –ø—Ä–æ–ø—É—â–µ–Ω–æ

‚Üí "‚úì –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ: 2, –ø—Ä–æ–ø—É—â–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: 1"
```

### –í—Å–µ –¥—É–±–ª–∏–∫–∞—Ç—ã
```
–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ —É–∂–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã:
‚Üí "‚ÑπÔ∏è –í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–æ—Ç–æ —É–∂–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω—ã"
```

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ú–µ—Ç–æ–¥ calculateImageHash()
```kotlin
private fun calculateImageHash(bitmap: Bitmap): String {
    // 1. –£–º–µ–Ω—å—à–∞–µ–º –¥–æ 8x8
    val smallBitmap = Bitmap.createScaledBitmap(bitmap, 8, 8, false)
    
    // 2. –í—ã—á–∏—Å–ª—è–µ–º —Å—Ä–µ–¥–Ω—é—é —è—Ä–∫–æ—Å—Ç—å
    var totalBrightness = 0
    for (x in 0 until 8) {
        for (y in 0 until 8) {
            val pixel = smallBitmap.getPixel(x, y)
            val brightness = (r + g + b) / 3
            totalBrightness += brightness
        }
    }
    val avgBrightness = totalBrightness / 64
    
    // 3. –°–æ–∑–¥–∞–µ–º –±–∏–Ω–∞—Ä–Ω—ã–π —Ö–µ—à
    val hash = StringBuilder()
    for (–∫–∞–∂–¥—ã–π –ø–∏–∫—Å–µ–ª—å) {
        hash.append(if (brightness >= avgBrightness) "1" else "0")
    }
    
    // 4. –ö–æ–Ω–≤–µ—Ä—Ç–∏—Ä—É–µ–º –≤ hex
    return hash.chunked(4).joinToString("") { 
        Integer.parseInt(it, 2).toString(16)
    }
}
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
```kotlin
// –ü–æ–ª—É—á–∞–µ–º —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ñ–æ—Ç–æ
val existingPhotos = database.memberPhotoDao().getPhotosForMemberSync(memberId)

// –°—Ä–∞–≤–Ω–∏–≤–∞–µ–º —Ö–µ—à–∏
for (existingPhoto in existingPhotos) {
    val existingBitmap = BitmapFactory.decodeFile(existingPhoto.photoUri)
    val existingHash = calculateImageHash(existingBitmap)
    
    if (existingHash == imageHash) {
        // –î—É–±–ª–∏–∫–∞—Ç –Ω–∞–π–¥–µ–Ω!
        return false
    }
}
```

## üìù –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–í—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è:
```
PhotoGallery: üíæ –°–æ—Ö—Ä–∞–Ω—è–µ–º —Ñ–æ—Ç–æ –¥–ª—è —á–ª–µ–Ω–∞ ID: 2 (–õ–∏–ª–∏—è –ì–∞—Ä–∏–ø–æ–≤–∞)
PhotoGallery: üîë –•–µ—à –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è: a5f3c9e1b2d4...
PhotoGallery: ‚ö†Ô∏è –§–æ—Ç–æ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –¥–ª—è –õ–∏–ª–∏—è –ì–∞—Ä–∏–ø–æ–≤–∞
```

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ
1. –†–∞—Å–ø–æ–∑–Ω–∞–ª–∏ –ª–∏—Ü–æ –Ω–∞ —Ñ–æ—Ç–æ
2. –ü—Ä–∏–∫—Ä–µ–ø–∏–ª–∏ –∫ —á–ª–µ–Ω—É —Å–µ–º—å–∏
3. –ß–µ—Ä–µ–∑ –¥–µ–Ω—å —Ä–∞—Å–ø–æ–∑–Ω–∞–ª–∏ —Ç–æ –∂–µ —Ñ–æ—Ç–æ —Å–Ω–æ–≤–∞
4. –ü–æ–ø—ã—Ç–∫–∞ –ø—Ä–∏–∫—Ä–µ–ø–∏—Ç—å ‚Üí –±–ª–æ–∫–∏—Ä—É–µ—Ç—Å—è
5. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ –¥—É–±–ª–∏–∫–∞—Ç–µ

### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ì—Ä—É–ø–ø–æ–≤–æ–µ —Ñ–æ—Ç–æ
1. –ù–∞ —Ñ–æ—Ç–æ 3 —á–µ–ª–æ–≤–µ–∫–∞
2. –í—Å–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–Ω—ã
3. –í—ã–±–∏—Ä–∞–µ–º –≤—Å–µ—Ö –¥–ª—è –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è
4. –£ –æ–¥–Ω–æ–≥–æ —ç—Ç–æ —Ñ–æ—Ç–æ —É–∂–µ –µ—Å—Ç—å
5. –†–µ–∑—É–ª—å—Ç–∞—Ç: "‚úì –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–æ: 2, –ø—Ä–æ–ø—É—â–µ–Ω–æ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤: 1"

### –°—Ü–µ–Ω–∞—Ä–∏–π 3: –†–∞–∑–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ –æ–¥–Ω–æ–≥–æ —Ñ–æ—Ç–æ
1. –ï—Å—Ç—å –æ—Ä–∏–≥–∏–Ω–∞–ª —Ñ–æ—Ç–æ (5MB, 4000x3000)
2. –ï—Å—Ç—å —Å–∂–∞—Ç–∞—è –≤–µ—Ä—Å–∏—è (500KB, 1920x1080)
3. –û–±–µ –≤–µ—Ä—Å–∏–∏ –∏–º–µ—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π pHash
4. –í—Ç–æ—Ä–∞—è –≤–µ—Ä—Å–∏—è –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è

## ‚ö° –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ö–µ—à–∞:** ~5-10ms
- **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ—à–µ–π:** <1ms
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ 10 —Ñ–æ—Ç–æ:** ~50-100ms
- **–ü—Ä–æ–≤–µ—Ä–∫–∞ 100 —Ñ–æ—Ç–æ:** ~500ms-1s

## üîÆ –ë—É–¥—É—â–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –í–æ–∑–º–æ–∂–Ω—ã–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:
1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ö–µ—à–µ–π –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
2. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è —Ö–µ—à–µ–π –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
3. Hamming distance –¥–ª—è –ø–æ—Ö–æ–∂–∏—Ö —Ñ–æ—Ç–æ
4. –ü–∞–∫–µ—Ç–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

### –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1. –ü–æ–∏—Å–∫ –ø–æ—Ö–æ–∂–∏—Ö —Ñ–æ—Ç–æ (–Ω–µ —Ç–æ–ª—å–∫–æ —Ç–æ—á–Ω—ã—Ö –¥—É–±–ª–∏–∫–∞—Ç–æ–≤)
2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

## ‚ú® –ò—Ç–æ–≥

–°–∏—Å—Ç–µ–º–∞ –Ω–∞–¥–µ–∂–Ω–æ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç—ã, –æ–±–µ—Å–ø–µ—á–∏–≤–∞—è —á–∏—Å—Ç–æ—Ç—É –≥–∞–ª–µ—Ä–µ–∏ –∏ —ç–∫–æ–Ω–æ–º–∏—é –º–µ—Å—Ç–∞!
